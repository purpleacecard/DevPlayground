<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Date Subtraction</title>
</head>

<body>
	<script>
		function dateSubtraction(expiryDate) {
			let expiryArray = expiryDate.split('-', 3);
			let todaysArray = '2024-12-01'.split('-', 3);
			// console.log(expiryArray);
			// console.log(todaysArray);
			let expiryYear = Number(expiryArray[0]);
			let todaysYear = Number(todaysArray[0]);
			let expiryMonth = Number(expiryArray[1]);
			let todaysMonth = Number(todaysArray[1]);
			let expiryDay = Number(expiryArray[2]);
			let todaysDay = Number(todaysArray[2]);
			let diffYears = expiryYear - todaysYear;
			let diffMonths = expiryMonth - todaysMonth;
			let diffDays = expiryDay - todaysDay;
			console.log({ expiryYear }, { expiryMonth }, { expiryDay });
			console.log({ todaysYear }, { todaysMonth }, { todaysDay });
			console.log({ diffYears });
			console.log({ diffMonths });
			console.log({ diffDays });

			if (diffYears == 0 && diffMonths == 0 && diffDays === 0) {
				console.log('Product is expired');
			} else if (diffYears < 0) {
				console.log('Product is expired');
			} else if (diffYears == 0) {
				if (diffMonths == 0) {
					if (diffDays < 0) {
						console.log('Product is expired');
						return
					} else if (diffDays > 0) {
						console.log('Product is expiring this month, ' + diffDays + ' days left');
					}
					return;
				} else if (diffMonths < 0) {
					console.log('Product is expired');
					return;
				} else if (diffMonths > 0) {
					if (diffDays < 0) {
						console.log(
							diffMonths + ' Months and ' + (diffDays + 30) + ' days left'
						);
						return
					} else if (diffDays == 0) {
						console.log('A month left');
					} else if (diffDays > 0) {
						console.log(diffMonths + ' Months and ' + diffDays + ' days left');
						return;
					}
					console.log(diffMonths + ' Months left');
					return;
				}
				console.log(diffYears + ' Years left');
			} else if (diffYears > 0) {
				if (diffMonths < 0) {
					if (diffDays > 25) {
						diffMonths++
					} else if (diffDays > 10) {
						console.log('About ' + (diffYears - 1) + ' years, ' + (diffMonths + 12) + ' Months and ' + diffDays + ' days left');
						return
					}
					console.log('About ' + (diffYears - 1) + ' years and ' + (diffMonths + 12) + ' Months left');
				} else if (diffMonths == 0) {
					if (diffYears == 1) {
						console.log((diffYears * 365) + diffDays + ' days left');
						return
					}
					console.log(diffYears + ' years ' + diffDays + ' days left');
				} else if (diffMonths > 0) {
					console.log((diffYears) + ' year ' + diffMonths + ' Months left');
					return
				}
			}
		}
		dateSubtraction('2025-13-09');
	</script>
</body>

</html>